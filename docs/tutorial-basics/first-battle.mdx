---
title: 你的第一个战斗
description: 添加人物和切换音乐
sidebar_position: 2
---
相信很多人想先做一个战斗，那我们直接开始吧！

先改贴图，这里我就拿这个绿油油（我忘记为什么会绿油油的了）的维吉尔（这里注意要用png格式）

改贴图的代码去怪物脚本找到：
```lua title="Monsters/poseur.lua"
sprite = "poseur" --小伙子，记得使用PNG哟，不然的话扩展可是不认识你的哟
```
改成 `sprite = "维吉尔"`

注意这里的***‘维吉尔’***要改成你放的那个图片的名字(比如您的图片名是*"sans.png"*，那么这里写入的就是*"sans"*) 

![](img\first-battle\exmaple.png)

好大的维吉尔，所以我们需要调整图片尺寸（有些图片尺寸较小，所以不用改）


按照常理的方法应该使用 `monstersprite.Scale(横向大小,纵向大小)` 来调整尺寸，但是在CYF中有这么一个bug:
![](img\first-battle\error.png)

其实原因很简单，那就是因为CYF初始化战斗的时候还并没有创造这个怪物对象，如果我们调整它的大小，那么就会发生这个错误
~~（ps：为什么RTL连这个都没有发现）~~

（如果你看不懂这一句话没关系，就是说我们没办法调整尺寸而已）



所以怎么改尺寸这里我们就模糊的给出俩个方法（并不会详细解释怎么去做）

1. 直接修改图片大小  
2. 使用Sprite来创建怪物贴图

前者很多人都会，就是用一些修改p图工具改，网上一堆教程，后者的话对于那个来说超纲了。所以我们就先不改尺寸了，改角色名
找到 `name = "Poseur"`，改成 `name="Vergil"`  

![](img\first-battle\vergil.png)


接下来就是最重要的剧情了，按照已学知识改改  
这里靠你们自己发挥，毕竟我不擅长写文


## 音乐

当然，就这个音乐还不行，我们得加一个音乐：

```lua
music = "xxx"
```
这是最简单的方法。

但是这种方法不是很可靠，我们使用另一种方法：

```lua
Audio.Stop()
Audio.LoadFile("xxx")
```

接下来我介绍另一个函数： `EncounterStarting()` (代表一开始就执行的代码)
`Audio.Stop()`指停止所有声音
`Audio.LoadFile()`代表加载声音


由于只能使用ogg文件，所以mp3文件是不行的，得转格式

## 双结局

`canspare` 这个变量代表是否能仁慈